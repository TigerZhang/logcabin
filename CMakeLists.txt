cmake_minimum_required(VERSION 3.5)
project(logcabin)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

set(SOURCE_FILES
    Client/Backoff.cc
    Client/Backoff.h
    Client/BackoffTest.cc
    Client/Client.cc
    Client/ClientImpl.cc
    Client/ClientImpl.h
    Client/ClientImplTest.cc
    Client/ClientTest.cc
    Client/LeaderRPC.cc
    Client/LeaderRPC.h
    Client/LeaderRPCMock.cc
    Client/LeaderRPCMock.h
    Client/LeaderRPCTest.cc
    Client/MockClientImpl.cc
    Client/MockClientImpl.h
    Client/MockClientImplTest.cc
    Client/ServerControl.cc
    Client/SessionManager.cc
    Client/SessionManager.h
    Client/SessionManagerTest.cc
    Client/Util.cc
    Client/UtilTest.cc
    Core/Buffer.cc
    Core/Buffer.h
    Core/BufferTest.cc
    Core/Checksum.cc
    Core/Checksum.h
    Core/ChecksumTest.cc
    Core/CompatAtomic.h
    Core/CompatHash.h
    Core/CompatHashTest.cc
    Core/ConditionVariable.cc
    Core/ConditionVariable.h
    Core/ConditionVariableTest.cc
    Core/Config.cc
    Core/Config.h
    Core/ConfigTest.cc
    Core/Debug.cc
    Core/Debug.h
    Core/DebugTest.cc
    Core/Endian.h
    Core/Mutex.h
    Core/ProtoBuf.cc
    Core/ProtoBuf.h
    Core/ProtoBufTest.cc
    Core/Random.cc
    Core/Random.h
    Core/RandomTest.cc
    Core/RollingStat.cc
    Core/RollingStat.h
    Core/RollingStatTest.cc
    Core/STLUtil.h
    Core/STLUtilTest.cc
    Core/StringUtil.cc
    Core/StringUtil.h
    Core/StringUtilTest.cc
    Core/ThreadId.cc
    Core/ThreadId.h
    Core/ThreadIdTest.cc
    Core/Time.cc
    Core/Time.h
    Core/TimeTest.cc
    Core/Util.cc
    Core/Util.h
    Core/UtilTest.cc
    Event/File.cc
    Event/File.h
    Event/FileTest.cc
    Event/Loop.cc
    Event/Loop.h
    Event/LoopTest.cc
    Event/Signal.cc
    Event/Signal.h
    Event/SignalTest.cc
    Event/Timer.cc
    Event/Timer.h
    Event/TimerTest.cc
    Examples/Benchmark.cc
    Examples/FailoverTest.cc
    Examples/HelloWorld.cc
    Examples/Reconfigure.cc
    Examples/ReconfigureTest.cc
    Examples/SmokeTest.cc
    Examples/TreeOps.cc
    include/LogCabin/Client.h
    include/LogCabin/Debug.h
    include/LogCabin/Util.h
    Protocol/Common.h
    RPC/Address.cc
    RPC/Address.h
    RPC/AddressTest.cc
    RPC/ClientRPC.cc
    RPC/ClientRPC.h
    RPC/ClientRPCTest.cc
    RPC/ClientServerTest.cc
    RPC/ClientSession.cc
    RPC/ClientSession.h
    RPC/ClientSessionTest.cc
    RPC/MessageSocket.cc
    RPC/MessageSocket.h
    RPC/MessageSocketTest.cc
    RPC/OpaqueClientRPC.cc
    RPC/OpaqueClientRPC.h
    RPC/OpaqueClientRPCTest.cc
    RPC/OpaqueServer.cc
    RPC/OpaqueServer.h
    RPC/OpaqueServerRPC.cc
    RPC/OpaqueServerRPC.h
    RPC/OpaqueServerRPCTest.cc
    RPC/OpaqueServerTest.cc
    RPC/Protocol.cc
    RPC/Protocol.h
    RPC/Server.cc
    RPC/Server.h
    RPC/ServerRPC.cc
    RPC/ServerRPC.h
    RPC/ServerRPCTest.cc
    RPC/ServerTest.cc
    RPC/Service.h
    RPC/ServiceMock.cc
    RPC/ServiceMock.h
    RPC/ThreadDispatchService.cc
    RPC/ThreadDispatchService.h
    RPC/ThreadDispatchServiceTest.cc
    Server/ClientService.cc
    Server/ClientService.h
    Server/ClientServiceTest.cc
    Server/ControlService.cc
    Server/ControlService.h
    Server/Globals.cc
    Server/Globals.h
    Server/GlobalsTest.cc
    Server/Main.cc
    Server/RaftConsensus.cc
    Server/RaftConsensus.h
    Server/RaftConsensusInvariants.cc
    Server/RaftConsensusTest.cc
    Server/RaftService.cc
    Server/RaftService.h
    Server/ServerStats.cc
    Server/ServerStats.h
    Server/ServerStatsTest.cc
    Server/StateMachine.cc
    Server/StateMachine.h
    Server/StateMachineRocksdb.cc
    Server/StateMachineRocksdb.h
    Server/StateMachineTest.cc
    Storage/FilesystemUtil.cc
    Storage/FilesystemUtil.h
    Storage/FilesystemUtilTest.cc
    Storage/Layout.cc
    Storage/Layout.h
    Storage/LayoutTest.cc
    Storage/Log.cc
    Storage/Log.h
    Storage/LogFactory.cc
    Storage/LogFactory.h
    Storage/LogFactoryTest.cc
    Storage/MemoryLog.cc
    Storage/MemoryLog.h
    Storage/MemoryLogTest.cc
    Storage/SegmentedLog.cc
    Storage/SegmentedLog.h
    Storage/SegmentedLogTest.cc
    Storage/SimpleFileLog.cc
    Storage/SimpleFileLog.h
    Storage/SimpleFileLogTest.cc
    Storage/SnapshotFile.cc
    Storage/SnapshotFile.h
    Storage/SnapshotFileTest.cc
    Storage/Tool.cc
    test/TestRunner.cc
    Tree/ProtoBuf.cc
    Tree/ProtoBuf.h
    Tree/ProtoBufTest.cc
    Tree/Tree.cc
    Tree/Tree.h
    Tree/TreeTest.cc)

add_executable(logcabin ${SOURCE_FILES})
include_directories(. gtest/include)
