Import('env')

libprotobuf = File('/usr/lib/libprotobuf.a')
libcryptopp = File('/usr/lib/libcrypto++.a')
liblua = File('#/ardb/deps/lua/src/liblua.a')
libsnappy = File('/usr/lib/libsnappy.a')
libjemalloc = File('#/ardb/deps/jemalloc-4.4.0/lib/libjemalloc.a')
librocksdb = File('#/ardb/deps/rocksdb-5.2.1/librocksdb.a')
libardb = File('#/ardb/src/libardb.a')

libs = [ "pthread", libprotobuf, "rt", libardb, librocksdb, liblua, libcryptopp, libjemalloc, "lz4", "z", "bz2", "snappy"]

env.Default([
    env.Program("Benchmark",
                ["Benchmark.cc", "#build/liblogcabin.a"],
                LIBS = libs),

    env.Program("FailoverTest",
                ["FailoverTest.cc", "#build/liblogcabin.a"],
                LIBS = libs),

    env.Program("HelloWorld",
                ["HelloWorld.cc", "#build/liblogcabin.a"],
                LIBS = libs),

    env.Program("Reconfigure",
                ["Reconfigure.cc", "#build/liblogcabin.a"],
                LIBS = libs),

    env.Program("ReconfigureTest",
                ["ReconfigureTest.cc", "#build/liblogcabin.a"],
                LIBS = libs),

    env.Program("SmokeTest",
                ["SmokeTest.cc", "#build/liblogcabin.a"],
                LIBS = libs),

    env.Program("TreeOps",
                ["TreeOps.cc", "#build/liblogcabin.a"],
                LIBS = libs),
])
